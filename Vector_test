

#include "stdafx.h"


// Test_App.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include <iostream>
#include <cstring>
#include <fstream>
#include <string>
#include <map>
#include <vector>
struct store
{
	int ea[5];
	char name[5];
	char datatype;
	int default_val[5];
	char range;
	int Prf[5];
};

using namespace std;
void parsestruct(std::vector<std::pair<string,string>> vectorpass ){
	store s1;
	int key;
int i =0; 
	string parseline;
	for(vector<pair<string,string>>::iterator it=vectorpass.begin(); it!=vectorpass.end();it++)
	{
		if (it->first =="ExtUserPrmData" && it->first!="EndExtUserPrmData" ) //error line
			{
				 key = stoi(it->second);
				 s1.ea[i] = key; 
				 cout << key << "\n";
				 i++;
				 it++;
		} 
	}
}
void check(ifstream& myfilename ){
	vector <pair<string,string>> getlist;
	string linelist,linelist2;
	string test,test2;
	string checktext,checked;
	while(!myfilename.eof()){
    getline( myfilename , linelist );
	linelist2 = linelist.substr(0,linelist.find(";"));
	
	if(linelist2.find_first_not_of("#")){}
	else{
		size_t pos = linelist2.find("=");
		test = linelist2.substr(0,pos);
		test2 = linelist2.substr(pos+1);
		getlist.push_back(make_pair(test,test2));
		}	
	}

	/*for(vector <pair<string,string>>::iterator it=getlist.begin(); it!=getlist.end();it++)
	{
		cout << it->first << "=>" << it->second << "\n";
	}*/
	myfilename.close();
	parsestruct(getlist);
}
void main () {
	
	ifstream myfile ("C:\\Users\\JayachandranRamesh\\Documents\\test.txt"); 
  if (myfile.is_open())
  {
	  check(myfile);
	 
		  
  }
  else cout << "Unable to open file"; 
  cin.get();
}
